{"ast":null,"code":"import _classCallCheck from\"/Users/sierrazang/Documents/Altcademy/ReactJS/currency-exchange-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sierrazang/Documents/Altcademy/ReactJS/currency-exchange-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sierrazang/Documents/Altcademy/ReactJS/currency-exchange-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sierrazang/Documents/Altcademy/ReactJS/currency-exchange-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import currencies from'./utils/currencies';import{checkStatus,json}from'./utils/fetchUtils';import Chart from'chart.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CurrencyConverter=/*#__PURE__*/function(_React$Component){_inherits(CurrencyConverter,_React$Component);var _super=_createSuper(CurrencyConverter);function CurrencyConverter(props){var _this;_classCallCheck(this,CurrencyConverter);_this=_super.call(this,props);_this.getRate=function(base,quote){_this.setState({loading:true});fetch(\"https://altexchangerateapi.herokuapp.com/latest?from=\".concat(base,\"&to=\").concat(quote)).then(checkStatus).then(json).then(function(data){if(data.error){throw new Error(data.error);}var rate=data.rates[quote];_this.setState({rate:rate,baseValue:1,quoteValue:Number((1*rate).toFixed(2)),loading:false});}).catch(function(error){return console.error(error.message);});};_this.getHistoricalRates=function(base,quote){var endDate=new Date().toISOString().split('T')[0];var startDate=new Date(new Date().getTime()-30*24*60*60*1000).toISOString().split('T')[0];fetch(\"https://altexchangerateapi.herokuapp.com/\".concat(startDate,\"..\").concat(endDate,\"?from=\").concat(base,\"&to=\").concat(quote)).then(checkStatus).then(json).then(function(data){if(data.error){throw new Error(data.error);}var chartLabels=Object.keys(data.rates);var chartData=Object.values(data.rates).map(function(rate){return rate[quote];});var chartLabel=\"\".concat(base,\"/\").concat(quote);_this.buildChart(chartLabels,chartData,chartLabel);}).catch(function(error){return console.error(error.message);});};_this.buildChart=function(labels,data,label){var chartRef=_this.chartRef.current.getContext(\"2d\");if(typeof _this.chart!==\"undefined\"){_this.chart.destroy();}_this.chart=new Chart(_this.chartRef.current.getContext(\"2d\"),{type:'line',data:{labels:labels,datasets:[{label:label,data:data,fill:false,tension:0}]},options:{responsive:true}});};_this.changeBaseAcronym=function(event){var baseAcronym=event.target.value;_this.setState({baseAcronym:baseAcronym});_this.getRate(baseAcronym,_this.state.quoteAcronym);_this.getHistoricalRates(baseAcronym,_this.state.quoteAcronym);};_this.changeBaseValue=function(event){var quoteValue=_this.convert(event.target.value,_this.state.rate,_this.toQuote);_this.setState({baseValue:event.target.value,quoteValue:quoteValue});};_this.changeQuoteAcronym=function(event){var quoteAcronym=event.target.value;_this.setState({quoteAcronym:quoteAcronym});_this.getRate(_this.state.baseAcronym,quoteAcronym);_this.getHistoricalRates(_this.state.baseAcronym,quoteAcronym);};_this.changeQuoteValue=function(event){var baseValue=_this.convert(event.target.value,_this.state.rate,_this.toBase);_this.setState({quoteValue:event.target.value,baseValue:baseValue});};var params=new URLSearchParams(props.location);_this.state={rate:0,baseAcronym:params.get('base')||'USD',baseValue:0,quoteAcronym:params.get('quote')||'JPY',quoteValue:0,loading:false};_this.chartRef=/*#__PURE__*/React.createRef();return _this;}_createClass(CurrencyConverter,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$state=this.state,baseAcronym=_this$state.baseAcronym,quoteAcronym=_this$state.quoteAcronym;this.getRate(baseAcronym,quoteAcronym);this.getHistoricalRates(baseAcronym,quoteAcronym);}},{key:\"toBase\",value:function toBase(amount,rate){return amount*(1/rate);}},{key:\"toQuote\",value:function toQuote(amount,rate){return amount*rate;}},{key:\"convert\",value:function convert(amount,rate,equation){var input=parseFloat(amount);if(Number.isNaN(input)){return'';}return equation(input,rate).toFixed(2);}},{key:\"render\",value:function render(){var _this$state2=this.state,rate=_this$state2.rate,baseAcronym=_this$state2.baseAcronym,baseValue=_this$state2.baseValue,quoteAcronym=_this$state2.quoteAcronym,quoteValue=_this$state2.quoteValue,loading=_this$state2.loading;var currencyOptions=Object.keys(currencies).map(function(currencyAcronym){return/*#__PURE__*/_jsx(\"option\",{value:currencyAcronym,children:currencyAcronym},currencyAcronym);});return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-light\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-2\",children:\"Currency Converter\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"1 \",baseAcronym,\" to 1 \",quoteAcronym,\" = \",rate.toFixed(2),\" \",currencies[quoteAcronym].name]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-row p-3 mb-4 bg-light justify-content-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-0 px-5\",children:[/*#__PURE__*/_jsx(\"select\",{value:baseAcronym,onChange:this.changeBaseAcronym,className:\"form-control form-control-lg mb-2\",disabled:loading,children:currencyOptions}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-group-text\",children:currencies[baseAcronym].symbol})}),/*#__PURE__*/_jsx(\"input\",{id:\"base\",className:\"form-control\",value:baseValue,onChange:this.changeBaseValue,type:\"number\"})]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-secondary\",children:currencies[baseAcronym].name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"py-3 d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"=\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-0 px-5\",children:[/*#__PURE__*/_jsx(\"select\",{value:quoteAcronym,onChange:this.changeQuoteAcronym,className:\"form-control mb-2\",disabled:loading,children:currencyOptions}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-group-text\",children:currencies[quoteAcronym].symbol})}),/*#__PURE__*/_jsx(\"input\",{id:\"quote\",className:\"form-control\",value:quoteValue,onChange:this.changeQuoteValue,type:\"number\"})]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-secondary\",children:currencies[quoteAcronym].name})]})]}),/*#__PURE__*/_jsx(\"canvas\",{ref:this.chartRef})]});}}]);return CurrencyConverter;}(React.Component);export default CurrencyConverter;","map":{"version":3,"sources":["/Users/sierrazang/Documents/Altcademy/ReactJS/currency-exchange-app/src/CurrencyConverter.js"],"names":["React","currencies","checkStatus","json","Chart","CurrencyConverter","props","getRate","base","quote","setState","loading","fetch","then","data","error","Error","rate","rates","baseValue","quoteValue","Number","toFixed","catch","console","message","getHistoricalRates","endDate","Date","toISOString","split","startDate","getTime","chartLabels","Object","keys","chartData","values","map","chartLabel","buildChart","labels","label","chartRef","current","getContext","chart","destroy","type","datasets","fill","tension","options","responsive","changeBaseAcronym","event","baseAcronym","target","value","state","quoteAcronym","changeBaseValue","convert","toQuote","changeQuoteAcronym","changeQuoteValue","toBase","params","URLSearchParams","location","get","createRef","amount","equation","input","parseFloat","isNaN","currencyOptions","currencyAcronym","name","symbol","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport currencies from './utils/currencies';\nimport { checkStatus, json } from './utils/fetchUtils';\nimport Chart from 'chart.js';\n\nclass CurrencyConverter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const params = new URLSearchParams(props.location);\n\n    this.state = {\n      rate: 0,\n      baseAcronym: params.get('base') || 'USD',\n      baseValue: 0,\n      quoteAcronym: params.get('quote') || 'JPY',\n      quoteValue: 0,\n      loading: false,\n    };\n\n     this.chartRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { baseAcronym, quoteAcronym } = this.state;\n    this.getRate(baseAcronym, quoteAcronym);\n    this.getHistoricalRates(baseAcronym, quoteAcronym);\n  }\n\n  getRate = (base, quote) => {\n    this.setState({ loading: true });\n    fetch(`https://altexchangerateapi.herokuapp.com/latest?from=${base}&to=${quote}`)\n      .then(checkStatus)\n      .then(json)\n      .then(data => {\n        if (data.error) {\n          throw new Error(data.error);\n        }\n\n        const rate = data.rates[quote];\n\n        this.setState({\n          rate,\n          baseValue: 1,\n          quoteValue: Number((1 * rate).toFixed(2)),\n          loading: false,\n        });\n      })\n      .catch(error => console.error(error.message));\n  }\n\n  getHistoricalRates = (base, quote) => {\n    const endDate = new Date().toISOString().split('T')[0];\n    const startDate = new Date((new Date()).getTime() - (30 * 24 * 60 * 60 * 1000)).toISOString().split('T')[0];\n\n    fetch(`https://altexchangerateapi.herokuapp.com/${startDate}..${endDate}?from=${base}&to=${quote}`)\n      .then(checkStatus)\n      .then(json)\n      .then(data => {\n        if (data.error) {\n          throw new Error(data.error);\n        }\n\n        const chartLabels = Object.keys(data.rates);\n        const chartData = Object.values(data.rates).map(rate => rate[quote]);\n        const chartLabel = `${base}/${quote}`;\n        this.buildChart(chartLabels, chartData, chartLabel);\n      })\n      .catch(error => console.error(error.message));\n  }\n\n  buildChart = (labels, data, label) => {\n    const chartRef = this.chartRef.current.getContext(\"2d\");\n\n    if (typeof this.chart !== \"undefined\") {\n      this.chart.destroy();\n    }\n\n    this.chart = new Chart(this.chartRef.current.getContext(\"2d\"), {\n      type: 'line',\n      data: {\n        labels,\n        datasets: [\n          {\n            label: label,\n            data,\n            fill: false,\n            tension: 0,\n          }\n        ]\n      },\n      options: {\n        responsive: true,\n      }\n    })\n  }\n\n  toBase(amount, rate) {\n    return amount * (1 / rate);\n  }\n\n  toQuote(amount, rate) {\n    return amount * rate;\n  }\n\n  convert(amount, rate, equation) {\n    const input = parseFloat(amount);\n    if (Number.isNaN(input)) {\n      return '';\n    }\n    return equation(input, rate).toFixed(2);\n  }\n\n  changeBaseAcronym = (event) => {\n    const baseAcronym = event.target.value;\n    this.setState({ baseAcronym });\n    this.getRate(baseAcronym, this.state.quoteAcronym);\n    this.getHistoricalRates(baseAcronym, this.state.quoteAcronym);\n  }\n\n  changeBaseValue = (event) => {\n    const quoteValue = this.convert(event.target.value, this.state.rate, this.toQuote);\n    this.setState({\n      baseValue: event.target.value,\n      quoteValue,\n    });\n  }\n\n  changeQuoteAcronym = (event) => {\n    const quoteAcronym = event.target.value;\n    this.setState({ quoteAcronym });\n    this.getRate(this.state.baseAcronym, quoteAcronym);\n    this.getHistoricalRates(this.state.baseAcronym, quoteAcronym);\n  }\n\n  changeQuoteValue = (event) => {\n    const baseValue = this.convert(event.target.value, this.state.rate, this.toBase);\n    this.setState({\n      quoteValue: event.target.value,\n      baseValue,\n    });\n  }\n\n  render() {\n    const { rate, baseAcronym, baseValue, quoteAcronym, quoteValue, loading } = this.state;\n\n    const currencyOptions = Object.keys(currencies).map(currencyAcronym => <option key={currencyAcronym} value={currencyAcronym}>{currencyAcronym}</option>);\n\n    return (\n      <React.Fragment>\n        <div className=\"text-center p-3 bg-light\">\n          <h2 className=\"mb-2\">Currency Converter</h2>\n          <h4>1 {baseAcronym} to 1 {quoteAcronym} = {rate.toFixed(2)} {currencies[quoteAcronym].name}</h4>\n        </div>\n        <form className=\"form-row p-3 mb-4 bg-light justify-content-center\">\n          <div className=\"form-group mb-0 px-5\">\n            <select value={baseAcronym} onChange={this.changeBaseAcronym} className=\"form-control form-control-lg mb-2\" disabled={loading}>\n              {currencyOptions}\n            </select>\n            <div className=\"input-group\">\n              <div className=\"input-group-prepend\">\n                <div className=\"input-group-text\">{currencies[baseAcronym].symbol}</div>\n              </div>\n              <input id=\"base\" className=\"form-control\" value={baseValue} onChange={this.changeBaseValue} type=\"number\" />\n            </div>\n            <small className=\"text-secondary\">{currencies[baseAcronym].name}</small>\n          </div>\n          <div className=\"py-3 d-flex justify-content-center align-items-center\">\n            <h3>=</h3>\n          </div>\n          <div className=\"form-group mb-0 px-5\">\n            <select value={quoteAcronym} onChange={this.changeQuoteAcronym} className=\"form-control mb-2\" disabled={loading}>\n              {currencyOptions}\n            </select>\n            <div className=\"input-group\">\n              <div className=\"input-group-prepend\">\n                <div className=\"input-group-text\">{currencies[quoteAcronym].symbol}</div>\n              </div>\n              <input id=\"quote\" className=\"form-control\" value={quoteValue} onChange={this.changeQuoteValue} type=\"number\" />\n            </div>\n            <small className=\"text-secondary\">{currencies[quoteAcronym].name}</small>\n          </div>\n        </form>\n        {<canvas ref={this.chartRef} />}\n      </React.Fragment>\n    )\n  }\n}\n\nexport default CurrencyConverter"]},"metadata":{},"sourceType":"module"}